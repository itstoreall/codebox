(this.webpackJsonpcodebox=this.webpackJsonpcodebox||[]).push([[2],{124:function(e,t,n){e.exports={Information:"Information_Information__29eRd",Information__btn:"Information_Information__btn__2QVzF",Information__listWrap:"Information_Information__listWrap__1ICll",Information__title:"Information_Information__title__2ouS9",Information__currentlist:"Information_Information__currentlist__9v-hJ",Information__item:"Information_Information__item__2TSkr",Information__itemKey:"Information_Information__itemKey__Vszyb",Information__generalList:"Information_Information__generalList__3lcxG",Information__generalValueWrap:"Information_Information__generalValueWrap__1G_MX",Information__generalKey:"Information_Information__generalKey__2QNgG",Information__generalValue:"Information_Information__generalValue__2p8hD"}},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(126),r=n(12),i=Object(a.a)((function(){return{viewTitle:{marginBottom:30,fontSize:24,color:r.a.primeryBlackColor}}}))},127:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(129),r=n.n(a),i=n(8),o=n(126),c=n(12),s=Object(o.a)((function(){return{History:{display:"flex",alignItems:"center",width:"calc(100% - 50px)"},homeButton:{cursor:"pointer",fill:c.a.primaryBlackColor50,"&:hover svg":{fill:c.a.primaryBlackColor75}},homeIcon:{fill:c.a.primaryBlackColor50},fromButton:{fontSize:14,cursor:"pointer","& span":{color:c.a.primaryBlackColor50},"&:hover span":{color:c.a.primaryBlackColor75}},codebox:{fontSize:14,color:c.a.primaryBlackColor50,"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},arrowIcon:{marginLeft:10,marginRight:10,width:14,height:15,fill:c.a.primaryBlackColor25,"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},currentPathname:{color:c.a.primaryBlackColor50,fontSize:14,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}}})),l=n(35),d=n(3),u=function(){var e=s();return Object(d.jsx)("span",{className:e.arrowIcon,children:Object(d.jsx)("svg",{width:"14",height:"14",children:Object(d.jsx)("use",{href:l.a+"#icon-arrow-right"})})})},j=function(e){var t=e.path,n=s();return Object(d.jsx)("span",{className:"/"===t?n.homeIcon:null,children:Object(d.jsx)("svg",{width:"13",height:"13",children:Object(d.jsx)("use",{href:l.a+"#icon-home"})})})},b=Object(i.g)((function(e){var t=e.props,n=e.history,a=s(),r=t.stateFrom,i=t.fromPathname,o=t.createPathname;return Object(d.jsx)("button",{type:"button",className:a.fromButton,onClick:function(){return n.push(r)},children:o(i)})})),m=Object(i.g)((function(e){var t=e.history,n=e.location,a=s();return"/"!==n.pathname?Object(d.jsx)("button",{type:"button",className:a.homeButton,onClick:function(){return t.push("/")},children:Object(d.jsx)(j,{path:n.pathname})}):Object(d.jsx)(j,{path:n.pathname})})),h=Object(i.g)((function(e){e.history;var t,n,a=e.location,r=s(),i=null===(t=a.state)||void 0===t?void 0:t.from,o=null===(n=a.state)||void 0===n?void 0:n.from.pathname.substr(1),c=a.pathname.substr(1),l=function(e){return e&&Object(d.jsx)("span",{className:e===c?r.currentPathname:e===o&&null,children:(null===e||void 0===e?void 0:e.includes("/"))?null===e||void 0===e?void 0:e.split("/")[1]:e})};return Object(d.jsxs)("div",{className:r.History,children:[Object(d.jsx)(m,{}),Object(d.jsx)(u,{}),"/"!==a.pathname?Object(d.jsx)(b,{props:{stateFrom:i,fromPathname:o,createPathname:l}}):Object(d.jsx)("span",{className:r.codebox,children:"codebox"}),o&&Object(d.jsx)(u,{}),l(c)]})})),p=n(57),f=n(7),x=n(1),O=n(13),g=n(124),_=n.n(g),v=function(e){var t=e.showInformation,n=e.toggleInformationModal;return t?Object(d.jsx)("button",{className:_.a.Information__btn,onClick:n,children:Object(d.jsx)("svg",{width:"14",height:"14",children:Object(d.jsx)("use",{href:l.a+"#icon-close"})})}):Object(d.jsx)("button",{className:_.a.Information__btn,onClick:n,children:Object(d.jsx)("svg",{width:"18",height:"18",children:Object(d.jsx)("use",{href:l.a+"#icon-info"})})})},w=function(e){var t,n=e.information;return Object(d.jsxs)("ul",{className:_.a.Information__currentlist,children:[Object(d.jsxs)("li",{className:_.a.Information__item,children:[Object(d.jsx)("span",{className:_.a.Information__itemKey,children:"View: "}),0!==n.nesting?null===n||void 0===n||null===(t=n.view)||void 0===t?void 0:t.title:"Home"]}),2===n.nesting&&Object(d.jsxs)("li",{className:_.a.Information__item,children:[Object(d.jsx)("span",{className:_.a.Information__itemKey,children:"Feature: "}),n.feature.title]})]})},N=function(){var e=Object(x.useContext)(O.a).localState;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("span",{className:_.a.Information__title,children:"General:"}),Object(d.jsx)("ul",{className:_.a.Information__generalList,children:Object(d.jsx)("li",{className:_.a.Information__generalItem,children:Object(d.jsxs)("div",{className:_.a.Information__generalValueWrap,children:[Object(d.jsxs)("span",{className:_.a.Information__generalKey,children:["Views:"," ",Object(d.jsx)("span",{className:_.a.Information__generalValue,children:e.quantity.views})]}),Object(d.jsxs)("span",{className:_.a.Information__generalKey,children:["Features:"," ",Object(d.jsx)("span",{className:_.a.Information__generalValue,children:e.quantity.features-1})]})]})})})]})},I=function(e){var t=e.information;return Object(d.jsxs)("div",{className:_.a.Information__listWrap,children:[Object(d.jsx)(w,{information:t}),Object(d.jsx)(N,{})]})},k=n(77),C=Object(i.g)((function(e){var t=e.location,n=Object(x.useState)(!1),a=Object(f.a)(n,2),r=a[0],i=a[1],o=Object(x.useState)(null),c=Object(f.a)(o,2),s=c[0],l=c[1],u=Object(x.useContext)(O.a),j=u.localState,b=u.setLocalState,m=u.views,h=Object(k.a)(t,m);Object(x.useEffect)((function(){return l(h)}),[t.pathname]),Object(x.useEffect)((function(){return b(Object(p.a)(Object(p.a)({},j),s))}),[s]);return Object(d.jsxs)("div",{className:_.a.Information,children:[Object(d.jsx)(v,{showInformation:r,toggleInformationModal:function(){return i(!r)}}),r&&Object(d.jsx)(I,{information:s})]})})),y=function(){return Object(d.jsxs)("div",{className:r.a.infoPanel,children:[Object(d.jsx)(h,{}),Object(d.jsx)(C,{})]})}},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(130),r=n.n(a),i=n(3),o=function(e){var t=e.children;return Object(i.jsx)("article",{className:r.a.Article,children:t})}},129:function(e,t,n){e.exports={infoPanel:"InfoPanel_infoPanel__2Wnih"}},130:function(e,t,n){e.exports={Article:"Article_Article__3XQP8"}},173:function(e,t,n){"use strict";n.r(t);var a,r=n(8),i=n(127),o=n(125),c=n(128),s=n(7),l=n(1),d=n(39),u=n.n(d),j=n(13),b=n(32),m=n.n(b),h=n(48),p=n(113),f=n(36),x=n(11),O=n(76),g=Object(O.a)(a||(a=Object(x.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      id\n      username\n      email\n      token\n      role\n      createdAt\n    }\n  }\n"]))),_=n(35),v=n(12),w=n(3),N=function(e){var t=e.setCodeboxToken,n=Object(l.useState)("guest"),a=Object(s.a)(n,2),r=a[0],i=a[1],o=Object(l.useState)("Guest"),c=Object(s.a)(o,2),d=c[0],j=c[1],b=Object(l.useState)(""),x=Object(s.a)(b,2),O=x[0],N=x[1],I=Object(l.useState)(""),k=Object(s.a)(I,2),C=k[0],y=k[1],V=Object(l.useState)(!0),S=Object(s.a)(V,2),R=S[0],G=S[1],L=Object(p.a)(g,{variables:{username:d,password:O}}),T=Object(s.a)(L,1)[0],M=function(){var e=Object(h.a)(m.a.mark((function e(n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,T({variables:{username:d,password:O}});case 4:a=e.sent,r=a.data,console.log("login token:",r.login),r&&(localStorage.setItem("codeboxToken",r.login.token),t(r.login.token)),j(""),N(""),y(""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("ERROR in GqlFormAndList > login:",e.t0.message),y(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),q=function(e){console.log("role:",e),i(e),j("admin"===e?"Admin":"guest"===e&&"Guest")};return console.log("hidePassword",R),Object(w.jsx)("div",{className:u.a.Login,children:Object(w.jsxs)("form",{className:u.a.Login__form,onSubmit:function(e){return M(e)},children:[Object(w.jsx)("h2",{className:u.a.Login__title,children:"guest"===r?"Guest":"admin"===r&&"Admin"}),"guest"===r?Object(w.jsx)(f.c,{className:"admin-login-password-input",padding:"15px",margin:"0 0 30px",width:"100%",border:"1px solid ".concat(v.a.primaryTextColor),borderRadius:"4px",type:R?"password":"text",placeholder:"password",value:O,onChange:function(e){N(e.target.value),y("")}}):"admin"===r&&Object(w.jsx)(f.c,{className:"admin-login-password-input",padding:"15px",margin:"0 0 30px",width:"100%",border:"1px solid ".concat(v.a.primaryTextColor),borderRadius:"4px",type:R?"password":"text",placeholder:"password",value:O,onChange:function(e){return N(e.target.value)}}),Object(w.jsx)("div",{className:u.a.Login__passwordEye,onClick:function(){return G(!R)},children:Object(w.jsx)("svg",{width:"20",height:"20",fill:v.a.primaryTextColor,children:R?Object(w.jsx)("use",{href:_.a+"#icon-eye-blocked"}):Object(w.jsx)("use",{href:_.a+"#icon-eye"})})}),Object(w.jsx)("span",{className:u.a.Login__error,children:C}),Object(w.jsx)(f.b,{className:"admin-login-btn",display:"block",padding:"15px",margin:"0 0 30px",width:"100%",borderRadius:"4px",type:"submit",children:"Login"}),"guest"===r?Object(w.jsx)("span",{className:u.a.Login__toggleLink,onClick:function(){return q("admin")},children:"Administrator"}):"admin"===r&&Object(w.jsx)("span",{className:u.a.Login__toggleLink,onClick:function(){return q("guest")},children:"Guest"})]})})},I=function(e){var t=e.setCodeboxToken;return Object(w.jsx)(f.b,{className:"admin-logout-btn",padding:"10px 20px",borderRadius:"4px",onClick:function(){localStorage.setItem("codeboxToken",""),t("")},children:"Logout"})},k=function(e){var t=e.toggleModal;return Object(w.jsx)(f.b,{className:"admin-delete-view-button-btn",margin:"0 0 10px 0",width:"20px",height:"20px",borderRadius:"4px",onClick:function(){return t(!0)},children:Object(w.jsx)("svg",{width:"10",height:"10",fill:"white",children:Object(w.jsx)("use",{href:_.a+"#icon-edit"})})})},C=function(e){var t=e.id,n=e.toggleAppModal,a=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n({content:"delete-view-btn",id:t}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)(f.b,{className:"admin-delete-view-button-btn",width:"20px",height:"20px",borderRadius:"4px",onClick:a,children:Object(w.jsx)("svg",{width:"10",height:"10",fill:"white",children:Object(w.jsx)("use",{href:_.a+"#icon-close"})})})},y=n(60),V=function(e){var t=e.view,n=e.updateGqlViewTitle,a=e.updateGqlViewPath,r=e.setUpdateGqlViewTitle,i=e.setUpdateGqlViewPath,o=e.updateView,c=e.toggleCardModal;return Object(w.jsxs)("form",{className:"admin-update-view-form",onSubmit:function(e){return o(e)},children:[Object(w.jsxs)("div",{className:u.a.cardModal__contentRow,children:["id: ",t.id]}),Object(w.jsxs)("div",{className:u.a.cardModal__contentRow,children:["title: ",Object(w.jsx)(f.a,{className:"admin-update-view-title-btn",padding:0,width:"250px",color:v.a.activeLinkColor,backgroundColor:"transparent",border:"none",outline:"none",placeholder:"Title",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(w.jsxs)("div",{className:u.a.cardModal__contentRow,children:["path: ",Object(w.jsx)(f.a,{className:"admin-update-view-path-btn",padding:0,width:"250px",color:v.a.activeLinkColor,border:"none",outline:"none",backgroundColor:"transparent",placeholder:"path",value:a,onChange:function(e){return i(e.target.value)}})]}),Object(w.jsxs)("div",{className:u.a.cardModal__btnWrap,children:[Object(w.jsx)(f.b,{className:"admin-update-view-btn",display:"block",padding:"3px 30px",margin:"0 10px 0 0",borderRadius:"2px",fontSize:"12px",type:"submit",onClick:function(e){return o(e)},children:"Update"}),Object(w.jsx)(f.b,{className:"admin-update-view-close-btn",padding:"3px 30px",borderRadius:"2px",fontSize:"12px",type:"submit",onClick:function(){return c(!1)},children:"Cancel"})]})]})},S=function(e){var t=e.view,n=e.updateGqlViewTitle,a=e.updateGqlViewPath,r=e.setUpdateGqlViewTitle,i=e.setUpdateGqlViewPath,o=e.toggleCardModal,c=e.refetch,l=Object(p.a)(y.c,{variables:{id:t.id,input:{title:n,path:a}}}),d=Object(s.a)(l,1)[0],u=function(){var e=Object(h.a)(m.a.mark((function e(n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log("id:",t.id),e.prev=2,e.next=5,d();case 5:a=e.sent,r=a.data,console.log("updateView !!!",r.updateView),c(),o(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("ERROR in GqlFormAndList > updateView:",e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)(V,{view:t,updateGqlViewTitle:n,updateGqlViewPath:a,setUpdateGqlViewTitle:r,setUpdateGqlViewPath:i,updateView:u,toggleCardModal:o})},R=function(e){var t=e.view,n=e.toggleAppModal,a=e.refetch,r=Object(l.useState)(!1),i=Object(s.a)(r,2),o=i[0],c=i[1],d=Object(l.useState)(""),j=Object(s.a)(d,2),b=j[0],m=j[1],h=Object(l.useState)(""),p=Object(s.a)(h,2),f=p[0],x=p[1];Object(l.useEffect)((function(){m(t.title),x(t.path)}),[]);var O=function(e){return c(e)};return Object(w.jsx)(w.Fragment,{children:o?Object(w.jsx)("div",{className:u.a.ViewList__cardModal,children:Object(w.jsx)(S,{view:t,updateGqlViewTitle:b,updateGqlViewPath:f,setUpdateGqlViewTitle:m,setUpdateGqlViewPath:x,toggleCardModal:O,refetch:a})}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:u.a.ViewList__card,children:[Object(w.jsxs)("div",{className:u.a.card__contentRow,children:["id: ",null===t||void 0===t?void 0:t.id]}),Object(w.jsxs)("div",{className:u.a.card__contentRow,children:["title: ",null===t||void 0===t?void 0:t.title]}),Object(w.jsxs)("div",{className:u.a.card__contentRow,children:["path: ",null===t||void 0===t?void 0:t.path]})]}),Object(w.jsxs)("div",{className:u.a.ViewList__btnWrap,children:[Object(w.jsx)(k,{toggleModal:O}),Object(w.jsx)(C,{id:null===t||void 0===t?void 0:t.id,toggleAppModal:n})]})]})})},G=function(e){var t=e.searchResult,n=Object(l.useState)(null),a=Object(s.a)(n,2),r=a[0],i=a[1],o=Object(l.useContext)(j.a),c=o.allViews,d=o.toggleAppModal,b=o.refetch;return Object(l.useEffect)((function(){return i(t||c)}),[c,t]),Object(w.jsx)("div",{className:u.a.ViewList__wrap,children:Object(w.jsx)("ul",{className:u.a.ViewList__list,children:null===r||void 0===r?void 0:r.map((function(e){return Object(w.jsx)("li",{className:u.a.ViewList__item,children:Object(w.jsx)(R,{view:e,toggleAppModal:d,refetch:b})},e.path)}))})})},L=function(e){var t=e.allViews,n=e.setSearchResult,a=Object(l.useState)(""),r=Object(s.a)(a,2),i=r[0],o=r[1];Object(l.useEffect)((function(){return c(i)}),[t]);var c=function(e){return n(null===t||void 0===t?void 0:t.filter((function(t){return t.id.includes(e)})))};return Object(w.jsxs)("div",{className:u.a.Search__wrap,children:[Object(w.jsx)(f.c,{padding:"10px 10px 10px 35px",width:"100%",border:"1px solid ".concat(v.a.primaryTextColor),borderRadius:"4px",placeholder:"enter view id",value:i,onChange:function(e){return function(e){o(e.target.value),c(e.target.value)}(e)}}),Object(w.jsx)("div",{className:u.a.Search__iconWrap,children:Object(w.jsx)("svg",{width:"14",height:"14",fill:v.a.primaryTextColor,children:Object(w.jsx)("use",{href:_.a+"#icon-search"})})})]})},T=function(){var e=Object(l.useContext)(j.a).toggleAppModal;return Object(w.jsx)(f.b,{className:"admin-create-view-btn",padding:"13px",margin:"0 20px 0 0",borderRadius:"50%",transform:"rotate(45deg)",type:"button",onClick:function(){return e({content:"create-view-btn"})},children:Object(w.jsx)("svg",{width:"12",height:"12",fill:"white",children:Object(w.jsx)("use",{href:_.a+"#icon-close"})})})},M=function(e){var t=e.allViews,n=e.setCodeboxToken,a=e.refetch,r=Object(l.useState)(t),i=Object(s.a)(r,2),o=i[0],c=i[1];return Object(w.jsxs)("div",{className:u.a.AdminDashboard__contentWrap,children:[Object(w.jsxs)("div",{className:u.a.content__btnWrap,children:[Object(w.jsx)(T,{refetch:a}),Object(w.jsx)(I,{setCodeboxToken:n})]}),Object(w.jsx)(L,{allViews:t,setSearchResult:c}),Object(w.jsx)(G,{searchResult:o})]})},q=function(){var e=Object(l.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(l.useContext)(j.a),i=r.loading,o=r.allViews,c=r.refetch;return Object(l.useMemo)((function(){return o&&console.log("allViews:",o)}),[o]),Object(l.useEffect)((function(){return a(localStorage.getItem("codeboxToken"))}),[]),Object(w.jsx)("div",{className:u.a.AdminDashboard,children:i?Object(w.jsx)("div",{className:u.a.AdminDashboard__loadingWrap,children:Object(w.jsx)("span",{children:"Heroku server: zzz.. \u2606(\u25e1.\u25d4)\u2605 ..."})}):Object(w.jsx)(w.Fragment,{children:n?Object(w.jsx)(M,{allViews:o,setCodeboxToken:a,refetch:c}):Object(w.jsx)(N,{setCodeboxToken:a})})})};t.default=Object(r.g)((function(){var e=Object(o.a)();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(i.a,{}),Object(w.jsxs)(c.a,{children:[Object(w.jsx)("h1",{className:e.viewTitle,children:"Admin"}),Object(w.jsx)(q,{})]})]})}))}}]);
//# sourceMappingURL=Admin.8897ccc8.chunk.js.map