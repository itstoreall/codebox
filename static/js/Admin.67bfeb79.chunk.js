(this.webpackJsonpcodebox=this.webpackJsonpcodebox||[]).push([[2],{124:function(e,t,n){e.exports={Information:"Information_Information__29eRd",Information__btn:"Information_Information__btn__2QVzF",Information__listWrap:"Information_Information__listWrap__1ICll",Information__title:"Information_Information__title__2ouS9",Information__currentlist:"Information_Information__currentlist__9v-hJ",Information__item:"Information_Information__item__2TSkr",Information__itemKey:"Information_Information__itemKey__Vszyb",Information__generalList:"Information_Information__generalList__3lcxG",Information__generalValueWrap:"Information_Information__generalValueWrap__1G_MX",Information__generalKey:"Information_Information__generalKey__2QNgG",Information__generalValue:"Information_Information__generalValue__2p8hD"}},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(126),o=n(12),r=Object(a.a)((function(){return{viewTitle:{marginBottom:30,fontSize:24,color:o.a.primeryBlackColor}}}))},127:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(129),o=n.n(a),r=n(8),i=n(126),c=n(12),s=Object(i.a)((function(){return{History:{display:"flex",alignItems:"center",width:"calc(100% - 50px)"},homeButton:{cursor:"pointer",fill:c.a.primaryBlackColor50,"&:hover svg":{fill:c.a.primaryBlackColor75}},homeIcon:{fill:c.a.primaryBlackColor50},fromButton:{fontSize:14,cursor:"pointer","& span":{color:c.a.primaryBlackColor50},"&:hover span":{color:c.a.primaryBlackColor75}},codebox:{fontSize:14,color:c.a.primaryBlackColor50,"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},arrowIcon:{marginLeft:10,marginRight:10,width:14,height:15,fill:c.a.primaryBlackColor25,"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},currentPathname:{color:c.a.primaryBlackColor50,fontSize:14,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}}})),l=n(35),u=n(3),d=function(){var e=s();return Object(u.jsx)("span",{className:e.arrowIcon,children:Object(u.jsx)("svg",{width:"14",height:"14",children:Object(u.jsx)("use",{href:l.a+"#icon-arrow-right"})})})},j=function(e){var t=e.path,n=s();return Object(u.jsx)("span",{className:"/"===t?n.homeIcon:null,children:Object(u.jsx)("svg",{width:"13",height:"13",children:Object(u.jsx)("use",{href:l.a+"#icon-home"})})})},b=Object(r.g)((function(e){var t=e.props,n=e.history,a=s(),o=t.stateFrom,r=t.fromPathname,i=t.createPathname;return Object(u.jsx)("button",{type:"button",className:a.fromButton,onClick:function(){return n.push(o)},children:i(r)})})),m=Object(r.g)((function(e){var t=e.history,n=e.location,a=s();return"/"!==n.pathname?Object(u.jsx)("button",{type:"button",className:a.homeButton,onClick:function(){return t.push("/")},children:Object(u.jsx)(j,{path:n.pathname})}):Object(u.jsx)(j,{path:n.pathname})})),h=Object(r.g)((function(e){e.history;var t,n,a=e.location,o=s(),r=null===(t=a.state)||void 0===t?void 0:t.from,i=null===(n=a.state)||void 0===n?void 0:n.from.pathname.substr(1),c=a.pathname.substr(1),l=function(e){return e&&Object(u.jsx)("span",{className:e===c?o.currentPathname:e===i&&null,children:(null===e||void 0===e?void 0:e.includes("/"))?null===e||void 0===e?void 0:e.split("/")[1]:e})};return Object(u.jsxs)("div",{className:o.History,children:[Object(u.jsx)(m,{}),Object(u.jsx)(d,{}),"/"!==a.pathname?Object(u.jsx)(b,{props:{stateFrom:r,fromPathname:i,createPathname:l}}):Object(u.jsx)("span",{className:o.codebox,children:"codebox"}),i&&Object(u.jsx)(d,{}),l(c)]})})),p=n(57),f=n(7),x=n(1),O=n(13),_=n(124),g=n.n(_),v=function(e){var t=e.showInformation,n=e.toggleInformationModal;return t?Object(u.jsx)("button",{className:g.a.Information__btn,onClick:n,children:Object(u.jsx)("svg",{width:"14",height:"14",children:Object(u.jsx)("use",{href:l.a+"#icon-close"})})}):Object(u.jsx)("button",{className:g.a.Information__btn,onClick:n,children:Object(u.jsx)("svg",{width:"18",height:"18",children:Object(u.jsx)("use",{href:l.a+"#icon-info"})})})},w=function(e){var t,n=e.information;return Object(u.jsxs)("ul",{className:g.a.Information__currentlist,children:[Object(u.jsxs)("li",{className:g.a.Information__item,children:[Object(u.jsx)("span",{className:g.a.Information__itemKey,children:"View: "}),0!==n.nesting?null===n||void 0===n||null===(t=n.view)||void 0===t?void 0:t.title:"Home"]}),2===n.nesting&&Object(u.jsxs)("li",{className:g.a.Information__item,children:[Object(u.jsx)("span",{className:g.a.Information__itemKey,children:"Feature: "}),n.feature.title]})]})},I=function(){var e=Object(x.useContext)(O.a).localState;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("span",{className:g.a.Information__title,children:"General:"}),Object(u.jsx)("ul",{className:g.a.Information__generalList,children:Object(u.jsx)("li",{className:g.a.Information__generalItem,children:Object(u.jsxs)("div",{className:g.a.Information__generalValueWrap,children:[Object(u.jsxs)("span",{className:g.a.Information__generalKey,children:["Views:"," ",Object(u.jsx)("span",{className:g.a.Information__generalValue,children:e.quantity.views})]}),Object(u.jsxs)("span",{className:g.a.Information__generalKey,children:["Features:"," ",Object(u.jsx)("span",{className:g.a.Information__generalValue,children:e.quantity.features-1})]})]})})})]})},N=function(e){var t=e.information;return Object(u.jsxs)("div",{className:g.a.Information__listWrap,children:[Object(u.jsx)(w,{information:t}),Object(u.jsx)(I,{})]})},k=n(77),C=Object(r.g)((function(e){var t=e.location,n=Object(x.useState)(!1),a=Object(f.a)(n,2),o=a[0],r=a[1],i=Object(x.useState)(null),c=Object(f.a)(i,2),s=c[0],l=c[1],d=Object(x.useContext)(O.a),j=d.localState,b=d.setLocalState,m=d.views,h=Object(k.a)(t,m);Object(x.useEffect)((function(){return l(h)}),[t.pathname]),Object(x.useEffect)((function(){return b(Object(p.a)(Object(p.a)({},j),s))}),[s]);return Object(u.jsxs)("div",{className:g.a.Information,children:[Object(u.jsx)(v,{showInformation:o,toggleInformationModal:function(){return r(!o)}}),o&&Object(u.jsx)(N,{information:s})]})})),y=function(){return Object(u.jsxs)("div",{className:o.a.infoPanel,children:[Object(u.jsx)(h,{}),Object(u.jsx)(C,{})]})}},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(130),o=n.n(a),r=n(3),i=function(e){var t=e.children;return Object(r.jsx)("article",{className:o.a.Article,children:t})}},129:function(e,t,n){e.exports={infoPanel:"InfoPanel_infoPanel__2Wnih"}},130:function(e,t,n){e.exports={Article:"Article_Article__3XQP8"}},163:function(e,t,n){"use strict";n.r(t);var a,o=n(8),r=n(127),i=n(125),c=n(128),s=n(7),l=n(1),u=n(39),d=n.n(u),j=n(13),b=n(32),m=n.n(b),h=n(48),p=n(113),f=n(36),x=n(11),O=n(76),_=Object(O.a)(a||(a=Object(x.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      id\n      username\n      email\n      token\n      role\n      createdAt\n    }\n  }\n"]))),g=n(12),v=n(3),w=function(e){var t=e.setCodeboxToken,n=Object(l.useState)("guest"),a=Object(s.a)(n,2),o=a[0],r=a[1],i=Object(l.useState)("Guest"),c=Object(s.a)(i,2),u=c[0],j=c[1],b=Object(l.useState)(""),x=Object(s.a)(b,2),O=x[0],w=x[1],I=Object(l.useState)(""),N=Object(s.a)(I,2),k=N[0],C=N[1],y=Object(p.a)(_,{variables:{username:u,password:O}}),S=Object(s.a)(y,1)[0],L=function(){var e=Object(h.a)(m.a.mark((function e(n){var a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,S({variables:{username:u,password:O}});case 4:a=e.sent,o=a.data,console.log("login token:",o.login),o&&(localStorage.setItem("codeboxToken",o.login.token),t(o.login.token)),j(""),w(""),C(""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("ERROR in GqlFormAndList > login:",e.t0.message),C(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),V=function(e){console.log("role:",e),r(e),j("admin"===e?"Admin":"guest"===e&&"Guest")};return Object(v.jsx)("div",{className:d.a.Login,children:Object(v.jsxs)("form",{className:d.a.Login__form,onSubmit:function(e){return L(e)},children:[Object(v.jsx)("h2",{className:d.a.Login__title,children:"guest"===o?"Guest":"admin"===o&&"Admin"}),"guest"===o?Object(v.jsx)(f.c,{className:"admin-login-password-input",padding:"15px",margin:"0 0 30px",width:"100%",textAlign:"center",border:"1px solid ".concat(g.a.primaryTextColor),borderRadius:"4px",placeholder:"password",value:O,onChange:function(e){w(e.target.value),C("")}}):"admin"===o&&Object(v.jsx)(f.c,{className:"admin-login-password-input",padding:"15px",margin:"0 0 30px",width:"100%",textAlign:"center",border:"1px solid ".concat(g.a.primaryTextColor),borderRadius:"4px",placeholder:"password",value:O,onChange:function(e){return w(e.target.value)}}),Object(v.jsx)("span",{className:d.a.Login__error,children:k}),Object(v.jsx)(f.b,{className:"admin-login-btn",display:"block",padding:"15px",margin:"0 0 30px",width:"100%",borderRadius:"4px",type:"submit",children:"Login"}),"guest"===o?Object(v.jsx)("sapn",{className:d.a.Login__toggleLink,onClick:function(){return V("admin")},children:"Administrator"}):"admin"===o&&Object(v.jsx)("sapn",{className:d.a.Login__toggleLink,onClick:function(){return V("guest")},children:"Guest"})]})})},I=function(e){var t=e.setCodeboxToken;return Object(v.jsx)(f.b,{className:"admin-logout-btn",position:"absolute",top:"-62px",right:0,padding:"6px 20px",borderRadius:"4px",onClick:function(){localStorage.setItem("codeboxToken",""),t("")},children:"Logout"})},N=n(35),k=function(e){var t=e.toggleModal;return Object(v.jsx)(f.b,{className:"admin-delete-view-button-btn",margin:"0 0 10px 0",width:"20px",height:"20px",borderRadius:"4px",onClick:function(){return t(!0)},children:Object(v.jsx)("svg",{width:"10",height:"10",fill:"white",children:Object(v.jsx)("use",{href:N.a+"#icon-edit"})})})},C=function(e){var t=e.id,n=e.toggleAppModal,a=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n({content:"delete-view-btn",id:t}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(f.b,{className:"admin-delete-view-button-btn",width:"20px",height:"20px",borderRadius:"4px",onClick:a,children:Object(v.jsx)("svg",{width:"10",height:"10",fill:"white",children:Object(v.jsx)("use",{href:N.a+"#icon-close"})})})},y=n(60),S=function(e){var t=e.view,n=e.toggleAppModal,a=e.refetch,o=Object(l.useState)(!1),r=Object(s.a)(o,2),i=r[0],c=r[1],u=Object(l.useState)(""),j=Object(s.a)(u,2),b=j[0],x=j[1],O=Object(l.useState)(""),_=Object(s.a)(O,2),w=_[0],I=_[1];Object(l.useEffect)((function(){x(t.title),I(t.path)}),[]);var N=Object(p.a)(y.c,{variables:{id:t.id,input:{title:b,path:w}}}),S=Object(s.a)(N,1)[0],L=function(){var e=Object(h.a)(m.a.mark((function e(n){var o,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log("id:",t.id),e.prev=2,e.next=5,S();case 5:o=e.sent,r=o.data,console.log("updateView !!!",r.updateView),a(),V(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("ERROR in GqlFormAndList > updateView:",e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),V=function(e){return c(e)};return Object(v.jsx)(v.Fragment,{children:i?Object(v.jsx)("div",{className:d.a.ViewList__cardModal,children:Object(v.jsxs)("form",{className:d.a.GetOneView__form,onSubmit:function(e){return L(e)},children:[Object(v.jsxs)("div",{className:d.a.cardModal__contentRow,children:["id: ",t.id]}),Object(v.jsxs)("div",{className:d.a.cardModal__contentRow,children:["title: ",Object(v.jsx)(f.a,{className:"admin-update-view-title-btn",padding:0,width:"250px",color:g.a.activeLinkColor,backgroundColor:"transparent",border:"none",outline:"none",placeholder:"Title",value:b,onChange:function(e){return x(e.target.value)}})]}),Object(v.jsxs)("div",{className:d.a.cardModal__contentRow,children:["path: ",Object(v.jsx)(f.a,{className:"admin-update-view-path-btn",padding:0,width:"250px",color:g.a.activeLinkColor,border:"none",outline:"none",backgroundColor:"transparent",placeholder:"path",value:w,onChange:function(e){return I(e.target.value)}})]}),Object(v.jsxs)("div",{className:d.a.cardModal__btnWrap,children:[Object(v.jsx)(f.b,{className:"admin-update-view-btn",display:"block",padding:"3px 30px",margin:"0 10px 0 0",borderRadius:"2px",fontSize:"12px",type:"submit",onClick:function(e){return L(e)},children:"Update"}),Object(v.jsx)(f.b,{className:"admin-update-view-close-btn",padding:"3px 30px",borderRadius:"2px",fontSize:"12px",type:"submit",onClick:function(){return V(!1)},children:"Cancel"})]})]})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:d.a.ViewList__card,children:[Object(v.jsxs)("div",{className:d.a.card__contentRow,children:["id: ",null===t||void 0===t?void 0:t.id]}),Object(v.jsxs)("div",{className:d.a.card__contentRow,children:["title: ",null===t||void 0===t?void 0:t.title]}),Object(v.jsxs)("div",{className:d.a.card__contentRow,children:["path: ",null===t||void 0===t?void 0:t.path]})]}),Object(v.jsxs)("div",{className:d.a.ViewList__btnWrap,children:[Object(v.jsx)(k,{toggleModal:V}),Object(v.jsx)(C,{id:null===t||void 0===t?void 0:t.id,toggleAppModal:n})]})]})})},L=function(){var e=Object(l.useContext)(j.a),t=e.allViews,n=e.toggleAppModal,a=e.refetch;return Object(v.jsx)("div",{className:d.a.ViewList__wrap,children:Object(v.jsx)("ul",{className:d.a.ViewList__list,children:null===t||void 0===t?void 0:t.map((function(e){return Object(v.jsx)("li",{className:d.a.ViewList__item,children:Object(v.jsx)(S,{view:e,toggleAppModal:n,refetch:a})},e.path)}))})})},V=function(){var e=Object(l.useContext)(j.a).toggleAppModal;return Object(v.jsx)(f.b,{className:"admin-create-view-btn",position:"absolute",top:"-62px",right:"100px",padding:"10px",borderRadius:"50%",transform:"rotate(45deg)",type:"button",onClick:function(){return e({content:"create-view-btn"})},children:Object(v.jsx)("svg",{width:"9",height:"9",fill:"white",children:Object(v.jsx)("use",{href:N.a+"#icon-close"})})})},R=function(e){var t=e.setCodeboxToken,n=e.refetch;return Object(v.jsxs)("div",{className:d.a.AdminDashboard__contentWrap,children:[Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(V,{refetch:n}),Object(v.jsx)(I,{setCodeboxToken:t})]}),Object(v.jsx)(L,{})]})},A=function(){var e=Object(l.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(l.useContext)(j.a),r=o.loading,i=o.allViews,c=o.refetch;return Object(l.useMemo)((function(){return i&&console.log("allViews:",i)}),[i]),Object(l.useEffect)((function(){return a(localStorage.getItem("codeboxToken"))}),[]),Object(v.jsx)("div",{className:d.a.AdminDashboard,children:r?Object(v.jsx)("div",{className:d.a.AdminDashboard__loadingWrap,children:Object(v.jsx)("span",{children:"Heroku server: zzz.. \u2606(\u25e1.\u25d4)\u2605 ..."})}):Object(v.jsx)(v.Fragment,{children:n?Object(v.jsx)(R,{setCodeboxToken:a,refetch:c}):Object(v.jsx)(w,{setCodeboxToken:a})})})};t.default=Object(o.g)((function(){var e=Object(i.a)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(r.a,{}),Object(v.jsxs)(c.a,{children:[Object(v.jsx)("h1",{className:e.viewTitle,children:"Admin"}),Object(v.jsx)(A,{})]})]})}))}}]);
//# sourceMappingURL=Admin.67bfeb79.chunk.js.map