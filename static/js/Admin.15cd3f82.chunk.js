(this.webpackJsonpcodebox=this.webpackJsonpcodebox||[]).push([[2],{124:function(e,t,n){e.exports={Information:"Information_Information__29eRd",Information__btn:"Information_Information__btn__2QVzF",Information__listWrap:"Information_Information__listWrap__1ICll",Information__title:"Information_Information__title__2ouS9",Information__currentlist:"Information_Information__currentlist__9v-hJ",Information__item:"Information_Information__item__2TSkr",Information__itemKey:"Information_Information__itemKey__Vszyb",Information__generalList:"Information_Information__generalList__3lcxG",Information__generalValueWrap:"Information_Information__generalValueWrap__1G_MX",Information__generalKey:"Information_Information__generalKey__2QNgG",Information__generalValue:"Information_Information__generalValue__2p8hD"}},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(126),r=n(14),o=Object(a.a)((function(){return{viewTitle:{marginBottom:30,fontSize:24,color:r.a.primeryBlackColor}}}))},127:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(129),r=n.n(a),o=n(7),i=n(126),c=n(14),s=Object(i.a)((function(){return{History:{display:"flex",alignItems:"center",width:"calc(100% - 50px)"},homeButton:{cursor:"pointer",fill:c.a.primaryBlackColor50,"&:hover svg":{fill:c.a.primaryBlackColor75}},homeIcon:{fill:c.a.primaryBlackColor50},fromButton:{fontSize:14,cursor:"pointer","& span":{color:c.a.primaryBlackColor50},"&:hover span":{color:c.a.primaryBlackColor75}},codebox:{fontSize:14,color:c.a.primaryBlackColor50,"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},arrowIcon:{marginLeft:10,marginRight:10,width:14,height:15,fill:c.a.primaryBlackColor25,"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},currentPathname:{color:c.a.primaryBlackColor50,fontSize:14,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}}})),l=n(34),u=n(3),d=function(){var e=s();return Object(u.jsx)("span",{className:e.arrowIcon,children:Object(u.jsx)("svg",{width:"14",height:"14",children:Object(u.jsx)("use",{href:l.a+"#icon-arrow-right"})})})},j=function(e){var t=e.path,n=s();return Object(u.jsx)("span",{className:"/"===t?n.homeIcon:null,children:Object(u.jsx)("svg",{width:"13",height:"13",children:Object(u.jsx)("use",{href:l.a+"#icon-home"})})})},b=Object(o.g)((function(e){var t=e.props,n=e.history,a=s(),r=t.stateFrom,o=t.fromPathname,i=t.createPathname;return Object(u.jsx)("button",{type:"button",className:a.fromButton,onClick:function(){return n.push(r)},children:i(o)})})),m=Object(o.g)((function(e){var t=e.history,n=e.location,a=s();return"/"!==n.pathname?Object(u.jsx)("button",{type:"button",className:a.homeButton,onClick:function(){return t.push("/")},children:Object(u.jsx)(j,{path:n.pathname})}):Object(u.jsx)(j,{path:n.pathname})})),h=Object(o.g)((function(e){e.history;var t,n,a=e.location,r=s(),o=null===(t=a.state)||void 0===t?void 0:t.from,i=null===(n=a.state)||void 0===n?void 0:n.from.pathname.substr(1),c=a.pathname.substr(1),l=function(e){return e&&Object(u.jsx)("span",{className:e===c?r.currentPathname:e===i&&null,children:(null===e||void 0===e?void 0:e.includes("/"))?null===e||void 0===e?void 0:e.split("/")[1]:e})};return Object(u.jsxs)("div",{className:r.History,children:[Object(u.jsx)(m,{}),Object(u.jsx)(d,{}),"/"!==a.pathname?Object(u.jsx)(b,{props:{stateFrom:o,fromPathname:i,createPathname:l}}):Object(u.jsx)("span",{className:r.codebox,children:"codebox"}),i&&Object(u.jsx)(d,{}),l(c)]})})),f=n(73),p=n(11),x=n(1),O=n(13),_=n(124),g=n.n(_),v=function(e){var t=e.showInformation,n=e.toggleInformationModal;return t?Object(u.jsx)("button",{className:g.a.Information__btn,onClick:n,children:Object(u.jsx)("svg",{width:"14",height:"14",children:Object(u.jsx)("use",{href:l.a+"#icon-close"})})}):Object(u.jsx)("button",{className:g.a.Information__btn,onClick:n,children:Object(u.jsx)("svg",{width:"18",height:"18",children:Object(u.jsx)("use",{href:l.a+"#icon-info"})})})},w=function(e){var t,n=e.information;return Object(u.jsxs)("ul",{className:g.a.Information__currentlist,children:[Object(u.jsxs)("li",{className:g.a.Information__item,children:[Object(u.jsx)("span",{className:g.a.Information__itemKey,children:"View: "}),0!==n.nesting?null===n||void 0===n||null===(t=n.view)||void 0===t?void 0:t.title:"Home"]}),2===n.nesting&&Object(u.jsxs)("li",{className:g.a.Information__item,children:[Object(u.jsx)("span",{className:g.a.Information__itemKey,children:"Feature: "}),n.feature.title]})]})},I=function(){var e=Object(x.useContext)(O.a).localState;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("span",{className:g.a.Information__title,children:"General:"}),Object(u.jsx)("ul",{className:g.a.Information__generalList,children:Object(u.jsx)("li",{className:g.a.Information__generalItem,children:Object(u.jsxs)("div",{className:g.a.Information__generalValueWrap,children:[Object(u.jsxs)("span",{className:g.a.Information__generalKey,children:["Views:"," ",Object(u.jsx)("span",{className:g.a.Information__generalValue,children:e.quantity.views})]}),Object(u.jsxs)("span",{className:g.a.Information__generalKey,children:["Features:"," ",Object(u.jsx)("span",{className:g.a.Information__generalValue,children:e.quantity.features-1})]})]})})})]})},N=function(e){var t=e.information;return Object(u.jsxs)("div",{className:g.a.Information__listWrap,children:[Object(u.jsx)(w,{information:t}),Object(u.jsx)(I,{})]})},k=n(76),C=Object(o.g)((function(e){var t=e.location,n=Object(x.useState)(!1),a=Object(p.a)(n,2),r=a[0],o=a[1],i=Object(x.useState)(null),c=Object(p.a)(i,2),s=c[0],l=c[1],d=Object(x.useContext)(O.a),j=d.localState,b=d.setLocalState,m=d.views,h=Object(k.a)(t,m);Object(x.useEffect)((function(){return l(h)}),[t.pathname]),Object(x.useEffect)((function(){return b(Object(f.a)(Object(f.a)({},j),s))}),[s]);return Object(u.jsxs)("div",{className:g.a.Information,children:[Object(u.jsx)(v,{showInformation:r,toggleInformationModal:function(){return o(!r)}}),r&&Object(u.jsx)(N,{information:s})]})})),y=function(){return Object(u.jsxs)("div",{className:r.a.infoPanel,children:[Object(u.jsx)(h,{}),Object(u.jsx)(C,{})]})}},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(130),r=n.n(a),o=n(3),i=function(e){var t=e.children;return Object(o.jsx)("article",{className:r.a.Article,children:t})}},129:function(e,t,n){e.exports={infoPanel:"InfoPanel_infoPanel__2Wnih"}},130:function(e,t,n){e.exports={Article:"Article_Article__3XQP8"}},163:function(e,t,n){"use strict";n.r(t);var a,r=n(7),o=n(127),i=n(125),c=n(128),s=n(11),l=n(1),u=n(74),d=n.n(u),j=n(13),b=n(61),m=n.n(b),h=n(75),f=n(113),p=n(53),x=n(10),O=n(72),_=Object(O.a)(a||(a=Object(x.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      id\n      username\n      email\n      token\n      role\n      createdAt\n    }\n  }\n"]))),g=n(14),v=n(3),w=function(e){var t=e.setCodeboxToken,n=Object(l.useState)("guest"),a=Object(s.a)(n,2),r=a[0],o=a[1],i=Object(l.useState)("Guest"),c=Object(s.a)(i,2),u=c[0],j=c[1],b=Object(l.useState)(""),x=Object(s.a)(b,2),O=x[0],w=x[1],I=Object(l.useState)(""),N=Object(s.a)(I,2),k=N[0],C=N[1],y=Object(f.a)(_,{variables:{username:u,password:O}}),S=Object(s.a)(y,1)[0],L=function(){var e=Object(h.a)(m.a.mark((function e(n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,S({variables:{username:u,password:O}});case 4:a=e.sent,r=a.data,console.log("login token:",r.login),r&&(localStorage.setItem("codeboxToken",r.login.token),t(r.login.token)),j(""),w(""),C(""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("ERROR in GqlFormAndList > login:",e.t0.message),C(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),R=function(e){console.log("role:",e),o(e),j("admin"===e?"Admin":"guest"===e&&"Guest")};return Object(v.jsx)("div",{className:d.a.Login,children:Object(v.jsxs)("form",{className:d.a.Login__form,onSubmit:function(e){return L(e)},children:[Object(v.jsx)("h2",{className:d.a.Login__title,children:"guest"===r?"Guest":"admin"===r&&"Admin"}),"guest"===r?Object(v.jsx)(p.c,{className:"admin-login-password-input",padding:"15px",margin:"0 0 30px",width:"100%",textAlign:"center",border:"1px solid ".concat(g.a.primaryTextColor),borderRadius:"4px",placeholder:"password",value:O,onChange:function(e){w(e.target.value),C("")}}):"admin"===r&&Object(v.jsx)(p.c,{className:"admin-login-password-input",padding:"15px",margin:"0 0 30px",width:"100%",textAlign:"center",border:"1px solid ".concat(g.a.primaryTextColor),borderRadius:"4px",placeholder:"password",value:O,onChange:function(e){return w(e.target.value)}}),Object(v.jsx)("span",{className:d.a.Login__error,children:k}),Object(v.jsx)(p.b,{className:"admin-login-btn",display:"block",padding:"15px",margin:"0 0 30px",width:"100%",borderRadius:"4px",type:"submit",children:"Login"}),"guest"===r?Object(v.jsx)("sapn",{className:d.a.Login__toggleLink,onClick:function(){return R("admin")},children:"Administrator"}):"admin"===r&&Object(v.jsx)("sapn",{className:d.a.Login__toggleLink,onClick:function(){return R("guest")},children:"Guest"})]})})},I=function(e){var t=e.setCodeboxToken;return Object(v.jsx)(p.b,{className:"admin-logout-btn",position:"absolute",top:"-62px",right:0,padding:"6px 20px",borderRadius:"4px",onClick:function(){localStorage.setItem("codeboxToken",""),t("")},children:"Logout"})},N=n(34),k=function(e){var t=e.toggleModal;return Object(v.jsx)(p.b,{className:"admin-delete-view-button-btn",margin:"0 0 10px 0",width:"20px",height:"20px",borderRadius:"4px",onClick:function(){return t(!0)},children:Object(v.jsx)("svg",{width:"9",height:"9",fill:"white",children:Object(v.jsx)("use",{href:N.a+"#icon-edit"})})})},C=n(77),y=function(e){var t=e.id,n=e.refetch,a=Object(f.a)(C.b,{variables:{id:t}}),r=Object(s.a)(a,1)[0],o=function(){var e=Object(h.a)(m.a.mark((function e(t){var a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,r();case 4:a=e.sent,o=a.data,console.log("deleted id !!!",o.deleteView),n(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("ERROR in GqlFormAndList > deleteView:",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(p.b,{className:"admin-delete-view-button-btn",width:"20px",height:"20px",borderRadius:"4px",onClick:function(e){return o(e)},children:Object(v.jsx)("svg",{width:"9",height:"9",fill:"white",children:Object(v.jsx)("use",{href:N.a+"#icon-close"})})})},S=function(e){var t=e.view,n=e.refetch,a=Object(l.useState)(!1),r=Object(s.a)(a,2),o=r[0],i=r[1],c=Object(l.useState)(""),u=Object(s.a)(c,2),j=u[0],b=u[1],x=Object(l.useState)(""),O=Object(s.a)(x,2),_=O[0],w=O[1];Object(l.useEffect)((function(){b(t.title),w(t.path)}),[]);var I=Object(f.a)(C.c,{variables:{id:t.id,input:{title:j,path:_}}}),N=Object(s.a)(I,1)[0],S=function(){var e=Object(h.a)(m.a.mark((function e(a){var r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),console.log("id:",t.id),e.prev=2,e.next=5,N();case 5:r=e.sent,o=r.data,console.log("updateView !!!",o.updateView),n(),L(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("ERROR in GqlFormAndList > updateView:",e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),L=function(e){return i(e)};return Object(v.jsx)(v.Fragment,{children:o?Object(v.jsx)("div",{className:d.a.ViewList__cardModal,children:Object(v.jsxs)("form",{className:d.a.GetOneView__form,onSubmit:function(e){return S(e)},children:[Object(v.jsxs)("div",{className:d.a.cardModal__contentRow,children:["id: ",t.id]}),Object(v.jsxs)("div",{className:d.a.cardModal__contentRow,children:["title: ",Object(v.jsx)(p.a,{className:"admin-update-view-title-btn",padding:0,width:"250px",color:g.a.activeLinkColor,backgroundColor:"transparent",border:"none",outline:"none",placeholder:"Title",value:j,onChange:function(e){return b(e.target.value)}})]}),Object(v.jsxs)("div",{className:d.a.cardModal__contentRow,children:["path: ",Object(v.jsx)(p.a,{className:"admin-update-view-path-btn",padding:0,width:"250px",color:g.a.activeLinkColor,border:"none",outline:"none",backgroundColor:"transparent",placeholder:"path",value:_,onChange:function(e){return w(e.target.value)}})]}),Object(v.jsxs)("div",{className:d.a.cardModal__btnWrap,children:[Object(v.jsx)(p.b,{className:"admin-update-view-btn",display:"block",padding:"3px 30px",margin:"0 10px 0 0",borderRadius:"2px",fontSize:"12px",type:"submit",onClick:function(e){return S(e)},children:"Update"}),Object(v.jsx)(p.b,{className:"admin-update-view-close-btn",padding:"3px 30px",borderRadius:"2px",fontSize:"12px",type:"submit",onClick:function(){return L(!1)},children:"Cancel"})]})]})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:d.a.ViewList__card,children:[Object(v.jsxs)("div",{className:d.a.card__contentRow,children:["id: ",null===t||void 0===t?void 0:t.id]}),Object(v.jsxs)("div",{className:d.a.card__contentRow,children:["title: ",null===t||void 0===t?void 0:t.title]}),Object(v.jsxs)("div",{className:d.a.card__contentRow,children:["path: ",null===t||void 0===t?void 0:t.path]})]}),Object(v.jsxs)("div",{className:d.a.ViewList__btnWrap,children:[Object(v.jsx)(k,{toggleModal:L}),Object(v.jsx)(y,{id:null===t||void 0===t?void 0:t.id,refetch:n})]})]})})},L=function(){var e=Object(l.useContext)(j.a),t=e.allViews,n=e.refetch;return Object(v.jsx)("div",{className:d.a.ViewList__wrap,children:Object(v.jsx)("ul",{className:d.a.ViewList__list,children:null===t||void 0===t?void 0:t.map((function(e){return Object(v.jsx)("li",{className:d.a.ViewList__item,children:Object(v.jsx)(S,{view:e,refetch:n})},e.path)}))})})},R=function(){var e=Object(l.useContext)(j.a).toggleAppModal;return Object(v.jsx)(p.b,{className:"admin-create-view-btn",position:"absolute",top:"-62px",right:"100px",padding:"10px",borderRadius:"50%",transform:"rotate(45deg)",type:"button",onClick:function(){return e("create-view-btn")},children:Object(v.jsx)("svg",{width:"9",height:"9",fill:"white",children:Object(v.jsx)("use",{href:N.a+"#icon-close"})})})},V=function(e){var t=e.setCodeboxToken,n=e.refetch;return Object(v.jsxs)("div",{className:d.a.AdminDashboard__contentWrap,children:[Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(R,{refetch:n}),Object(v.jsx)(I,{setCodeboxToken:t})]}),Object(v.jsx)(L,{})]})},A=function(){var e=Object(l.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(l.useContext)(j.a),o=r.loading,i=r.allViews,c=r.refetch;return Object(l.useMemo)((function(){return i&&console.log("allViews:",i)}),[i]),Object(l.useEffect)((function(){return a(localStorage.getItem("codeboxToken"))}),[]),Object(v.jsx)("div",{className:d.a.AdminDashboard,children:o?Object(v.jsx)("div",{className:d.a.AdminDashboard__loadingWrap,children:Object(v.jsx)("span",{children:"Heroku server: zzz.. \u2606(\u25e1.\u25d4)\u2605 ..."})}):Object(v.jsx)(v.Fragment,{children:n?Object(v.jsx)(V,{setCodeboxToken:a,refetch:c}):Object(v.jsx)(w,{setCodeboxToken:a})})})};t.default=Object(r.g)((function(){var e=Object(i.a)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(o.a,{}),Object(v.jsxs)(c.a,{children:[Object(v.jsx)("h1",{className:e.viewTitle,children:"Admin"}),Object(v.jsx)(A,{})]})]})}))}}]);
//# sourceMappingURL=Admin.15cd3f82.chunk.js.map